<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Robusto API: /Users/nicklasborjesson/Documents/PlatformIO/Projects/Robusto/components/robusto-network/src/message/robusto_message_sending.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Robusto API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_e90829bf200759e125a5bb5c56eb342e.html">Robusto</a></li><li class="navelem"><a class="el" href="dir_d9f63783ec3a7ac398d42e00b11bf8f7.html">components</a></li><li class="navelem"><a class="el" href="dir_3752900f654277f9540c6aabe035d0ec.html">robusto-network</a></li><li class="navelem"><a class="el" href="dir_0350bab4afb6feae065629a8109d581f.html">src</a></li><li class="navelem"><a class="el" href="dir_ff3bec6f222b298f83b71aa87ea3d752.html">message</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">robusto_message_sending.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Robusto functionality for receiving messages.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="robusto__logging_8h_source.html">robusto_logging.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="robusto__message_8h_source.html">robusto_message.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="robusto__time_8h_source.html">robusto_time.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="robusto__qos_8h_source.html">robusto_qos.h</a>&gt;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for robusto_message_sending.c:</div>
<div class="dyncontent">
<div class="center"><img src="robusto__message__sending_8c__incl.png" border="0" usemap="#a_2_users_2nicklasborjesson_2_documents_2_platform_i_o_2_projects_2_robusto_2components_2robusto-network_2src_2message_2robusto__message__sending_8c" alt=""/></div>
<map name="a_2_users_2nicklasborjesson_2_documents_2_platform_i_o_2_projects_2_robusto_2components_2robusto-network_2src_2message_2robusto__message__sending_8c" id="a_2_users_2nicklasborjesson_2_documents_2_platform_i_o_2_projects_2_robusto_2components_2robusto-network_2src_2message_2robusto__message__sending_8c">
<area shape="rect" title="Robusto functionality for receiving messages." alt="" coords="1603,5,1805,91"/>
<area shape="rect" href="robusto__logging_8h.html" title="Logging functionality." alt="" coords="1194,507,1318,533"/>
<area shape="poly" title=" " alt="" coords="1697,92,1674,164,1657,203,1636,240,1599,288,1556,332,1510,371,1463,407,1371,465,1298,503,1295,498,1368,460,1460,403,1507,367,1553,328,1595,284,1631,237,1652,200,1669,162,1692,91"/>
<area shape="rect" href="robusto__message_8h.html" title="Provides the Robusto messaging interface." alt="" coords="951,139,1086,165"/>
<area shape="poly" title=" " alt="" coords="1603,67,1102,141,1101,136,1602,62"/>
<area shape="rect" title=" " alt="" coords="1544,213,1622,238"/>
<area shape="poly" title=" " alt="" coords="1785,89,1806,106,1820,125,1825,146,1817,166,1805,177,1787,186,1741,201,1637,221,1636,215,1740,196,1785,181,1802,172,1812,163,1820,145,1815,127,1802,110,1782,94"/>
<area shape="rect" href="robusto__time_8h.html" title="Time keeping functionality." alt="" coords="1696,139,1803,165"/>
<area shape="poly" title=" " alt="" coords="1725,90,1741,124,1736,127,1720,92"/>
<area shape="rect" href="robusto__qos_8h.html" title="Robusto Quality&#45;of&#45;service functionality." alt="" coords="1003,213,1106,238"/>
<area shape="poly" title=" " alt="" coords="1604,79,1114,211,1113,206,1602,74"/>
<area shape="rect" title=" " alt="" coords="1877,139,1942,165"/>
<area shape="poly" title=" " alt="" coords="1790,89,1873,130,1871,135,1788,94"/>
<area shape="rect" href="robconfig_8h.html" title="This includes the Robusto config generated configuration files." alt="" coords="1337,581,1423,607"/>
<area shape="poly" title=" " alt="" coords="1278,531,1348,571,1345,576,1276,536"/>
<area shape="rect" title=" " alt="" coords="563,655,627,680"/>
<area shape="poly" title=" " alt="" coords="1251,535,1223,573,1202,593,1177,609,1132,625,1071,638,920,655,763,665,642,668,642,663,763,659,919,650,1070,632,1130,620,1175,604,1198,589,1219,569,1247,532"/>
<area shape="rect" title=" " alt="" coords="1334,655,1426,680"/>
<area shape="poly" title=" " alt="" coords="1383,607,1383,640,1377,640,1377,607"/>
<area shape="poly" title=" " alt="" coords="1087,159,1205,176,1345,203,1412,220,1473,239,1522,261,1556,284,1582,314,1601,345,1611,377,1615,409,1611,441,1599,473,1581,504,1555,535,1529,556,1499,571,1438,589,1437,584,1497,566,1526,551,1551,531,1576,501,1594,471,1605,440,1609,409,1606,378,1596,347,1578,317,1553,288,1519,265,1471,244,1411,225,1343,209,1204,182,1086,164"/>
<area shape="poly" title=" " alt="" coords="951,158,707,171,393,197,245,216,122,239,74,252,38,267,15,282,8,298,8,521,12,551,24,571,44,588,72,604,111,620,164,632,297,650,437,659,548,663,548,668,437,664,297,655,163,637,109,625,69,609,41,592,20,575,7,553,3,522,3,297,11,279,35,262,72,247,120,234,244,211,392,192,707,166,950,153"/>
<area shape="rect" title=" " alt="" coords="380,581,455,607"/>
<area shape="poly" title=" " alt="" coords="951,160,741,177,478,205,355,224,253,247,214,259,184,272,166,285,160,298,160,448,162,494,169,512,184,531,215,548,262,562,366,583,365,588,260,568,213,553,181,535,164,515,157,496,155,448,155,297,162,281,182,267,212,254,252,241,354,219,477,200,740,171,950,155"/>
<area shape="rect" href="robusto__peer_8h.html" title="Provides the Robusto peer interface." alt="" coords="830,213,936,238"/>
<area shape="poly" title=" " alt="" coords="997,168,920,208,917,203,994,163"/>
<area shape="rect" href="robusto__queue_8h.html" title="A template queue and the base worker. TODO: This should probably be reworked somehow." alt="" coords="649,434,767,459"/>
<area shape="poly" title=" " alt="" coords="951,165,884,183,850,197,819,215,794,235,774,260,743,317,724,374,714,420,709,419,719,372,738,314,769,257,791,232,816,210,848,192,883,178,950,160"/>
<area shape="rect" href="robusto__media_8h.html" title="Robusto media handling." alt="" coords="1099,286,1216,312"/>
<area shape="poly" title=" " alt="" coords="1050,163,1086,182,1121,211,1140,241,1153,271,1148,274,1136,243,1117,214,1083,187,1047,167"/>
<area shape="poly" title=" " alt="" coords="1087,157,1284,178,1526,210,1530,211,1529,216,1525,215,1284,183,1087,162"/>
<area shape="poly" title=" " alt="" coords="937,231,1090,253,1279,285,1367,305,1440,326,1490,347,1504,359,1509,371,1509,448,1507,469,1500,489,1477,524,1446,553,1416,575,1413,571,1443,549,1473,521,1495,486,1502,468,1504,448,1504,372,1500,362,1487,352,1438,331,1365,310,1278,291,1089,258,936,236"/>
<area shape="poly" title=" " alt="" coords="829,233,631,250,374,279,253,298,152,321,113,333,83,346,65,359,59,372,59,521,61,549,70,570,85,587,108,604,143,620,191,633,314,650,444,659,548,663,548,668,444,665,314,656,190,638,141,625,105,609,81,591,65,573,56,551,53,522,53,371,61,355,80,341,111,328,150,316,252,293,373,274,631,244,829,228"/>
<area shape="poly" title=" " alt="" coords="829,233,699,245,621,256,543,271,472,289,413,312,391,325,374,340,364,355,360,372,360,448,364,481,375,514,403,567,398,570,370,516,359,482,355,448,355,371,359,353,370,336,388,321,411,307,470,284,542,266,620,251,698,240,829,228"/>
<area shape="rect" title=" " alt="" coords="875,507,968,533"/>
<area shape="poly" title=" " alt="" coords="894,237,907,259,919,286,929,343,932,400,927,493,922,492,927,400,924,343,913,287,903,261,889,240"/>
<area shape="rect" href="robusto__system_8h.html" title="Robusto generic system functions." alt="" coords="195,507,320,533"/>
<area shape="poly" title=" " alt="" coords="829,232,550,252,414,268,366,278,340,289,319,310,302,334,278,391,265,447,261,493,255,492,260,446,273,389,297,332,315,306,337,284,365,273,413,263,549,247,829,227"/>
<area shape="rect" href="robusto__media__def_8h.html" title="The definition of the media types." alt="" coords="978,360,1121,386"/>
<area shape="poly" title=" " alt="" coords="901,237,962,284,1030,348,1026,352,958,288,897,241"/>
<area shape="rect" href="robusto__peer__def_8h_source.html" title=" " alt="" coords="771,286,904,312"/>
<area shape="poly" title=" " alt="" coords="877,240,855,275,851,272,873,237"/>
<area shape="poly" title=" " alt="" coords="321,523,1322,586,1322,592,320,528"/>
<area shape="poly" title=" " alt="" coords="271,531,312,567,369,604,415,623,463,638,548,657,547,662,461,643,413,628,367,609,309,572,267,535"/>
<area shape="poly" title=" " alt="" coords="286,531,378,572,376,577,283,536"/>
<area shape="rect" title=" " alt="" coords="237,581,305,607"/>
<area shape="poly" title=" " alt="" coords="262,533,268,566,263,567,257,534"/>
<area shape="rect" title=" " alt="" coords="145,581,213,607"/>
<area shape="poly" title=" " alt="" coords="246,536,204,573,201,569,242,532"/>
<area shape="rect" href="robusto__retval_8h.html" title="Return values functionality." alt="" coords="724,581,839,607"/>
<area shape="poly" title=" " alt="" coords="321,527,710,580,709,585,320,533"/>
<area shape="poly" title=" " alt="" coords="751,610,641,651,639,647,749,605"/>
<area shape="poly" title=" " alt="" coords="1122,379,1185,393,1255,416,1289,433,1321,453,1351,477,1376,506,1383,520,1387,536,1387,566,1382,567,1382,537,1378,522,1371,509,1347,481,1318,457,1286,438,1253,421,1184,398,1120,385"/>
<area shape="poly" title=" " alt="" coords="1053,386,1052,416,1048,455,1036,497,1026,517,1013,535,972,571,925,601,875,623,823,640,723,661,642,668,642,663,722,655,821,635,873,618,922,596,969,567,1009,531,1021,514,1031,495,1043,454,1047,415,1047,386"/>
<area shape="poly" title=" " alt="" coords="1050,387,1044,416,1032,456,1012,498,982,535,953,556,920,571,854,589,852,583,918,566,950,551,978,531,1007,496,1027,454,1039,415,1045,386"/>
<area shape="poly" title=" " alt="" coords="992,389,781,433,780,428,991,384"/>
<area shape="poly" title=" " alt="" coords="768,453,1180,506,1179,512,767,458"/>
<area shape="poly" title=" " alt="" coords="726,458,785,495,823,515,864,530,925,548,989,561,1117,579,1233,588,1323,590,1323,596,1233,593,1117,585,988,567,924,553,862,536,821,519,782,499,723,462"/>
<area shape="poly" title=" " alt="" coords="662,462,617,481,575,509,552,532,537,554,531,577,537,606,550,626,567,643,563,647,546,629,532,608,525,577,532,552,548,529,572,505,615,476,660,458"/>
<area shape="poly" title=" " alt="" coords="649,457,571,475,530,490,492,510,459,538,434,570,430,567,455,535,489,505,528,485,570,470,648,452"/>
<area shape="poly" title=" " alt="" coords="745,457,872,500,870,505,743,462"/>
<area shape="poly" title=" " alt="" coords="724,458,745,479,764,506,775,537,781,566,776,567,770,538,759,509,740,482,720,461"/>
<area shape="rect" title=" " alt="" coords="547,581,643,607"/>
<area shape="poly" title=" " alt="" coords="655,462,617,480,601,493,588,509,582,522,581,537,587,567,581,567,576,537,577,521,583,506,597,489,614,476,653,458"/>
<area shape="rect" href="robusto__concurrency_8h.html" title="Functionality for generic handling of concurrency; tasks/threads and their synchronization." alt="" coords="598,507,749,533"/>
<area shape="poly" title=" " alt="" coords="705,461,688,495,683,493,700,458"/>
<area shape="poly" title=" " alt="" coords="750,527,1323,584,1322,589,749,532"/>
<area shape="poly" title=" " alt="" coords="675,534,671,568,657,608,642,629,624,647,620,643,638,626,652,605,666,567,670,533"/>
<area shape="poly" title=" " alt="" coords="631,536,470,581,468,576,629,531"/>
<area shape="poly" title=" " alt="" coords="693,531,753,570,750,575,690,536"/>
<area shape="poly" title=" " alt="" coords="662,536,620,573,617,569,658,532"/>
<area shape="poly" title=" " alt="" coords="854,310,904,346,968,383,1022,405,1070,418,1156,432,1197,439,1239,451,1283,472,1331,505,1356,535,1373,566,1368,569,1352,538,1328,509,1281,477,1237,456,1196,444,1155,437,1069,424,1020,410,965,388,901,350,851,315"/>
<area shape="poly" title=" " alt="" coords="771,302,591,306,481,313,371,324,270,342,186,368,154,384,130,402,115,422,109,445,109,521,111,569,118,587,134,605,164,622,209,636,264,646,324,653,447,662,548,664,548,669,447,667,324,659,263,651,208,641,162,627,130,609,113,590,105,570,104,522,104,445,110,420,126,398,151,379,184,363,269,337,371,319,481,307,591,301,771,297"/>
<area shape="poly" title=" " alt="" coords="799,315,728,341,638,382,544,438,499,472,459,509,440,538,427,568,422,566,435,535,455,506,496,468,541,434,636,377,726,336,797,310"/>
<area shape="poly" title=" " alt="" coords="844,311,914,493,909,495,839,313"/>
<area shape="poly" title=" " alt="" coords="771,302,700,305,616,314,527,332,483,346,441,362,391,392,345,428,307,466,278,497,274,494,303,462,341,424,388,388,439,358,481,341,525,327,615,309,700,300,771,297"/>
<area shape="poly" title=" " alt="" coords="874,310,1000,352,999,357,872,315"/>
<area shape="poly" title=" " alt="" coords="1185,310,1235,338,1297,380,1327,407,1356,437,1381,470,1400,506,1404,522,1403,539,1395,568,1390,567,1398,538,1398,523,1395,508,1376,473,1352,440,1324,411,1293,385,1232,342,1182,315"/>
<area shape="poly" title=" " alt="" coords="1162,312,1164,346,1160,386,1147,431,1131,469,1113,500,1090,527,1063,550,1032,570,952,609,869,637,784,655,705,664,642,668,641,663,704,659,783,649,867,632,950,604,1029,566,1060,546,1086,523,1108,497,1126,467,1142,430,1155,385,1159,346,1156,312"/>
<area shape="poly" title=" " alt="" coords="1158,313,1150,347,1134,387,1109,435,1085,472,1056,503,1012,535,974,555,933,570,854,588,853,583,931,565,972,551,1009,531,1052,499,1081,469,1104,433,1130,385,1145,346,1153,312"/>
<area shape="poly" title=" " alt="" coords="1140,315,1081,354,1078,349,1138,310"/>
<area shape="poly" title=" " alt="" coords="1107,224,1209,227,1333,235,1449,253,1494,267,1527,284,1546,303,1556,322,1559,344,1560,371,1560,448,1559,474,1554,496,1544,515,1527,535,1507,552,1485,565,1438,583,1436,578,1482,560,1504,547,1523,531,1540,512,1549,494,1554,474,1555,448,1555,372,1554,345,1551,324,1542,306,1524,288,1492,272,1448,258,1333,241,1209,232,1107,229"/>
<area shape="poly" title=" " alt="" coords="1057,239,1053,345,1048,345,1052,239"/>
<area shape="poly" title=" " alt="" coords="1019,241,889,284,887,279,1017,236"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5f508dd12de7e78457a5a13adccfb73b" id="r_a5f508dd12de7e78457a5a13adccfb73b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robusto__message__sending_8c.html#a5f508dd12de7e78457a5a13adccfb73b">get_media_type_prefix_len</a> (<a class="el" href="robusto__media__def_8h.html#a6b00e7b716acc963b957b7c99915fe02">e_media_type</a> media_type, <a class="el" href="structrobusto__peer.html">robusto_peer_t</a> *peer)</td></tr>
<tr class="memdesc:a5f508dd12de7e78457a5a13adccfb73b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate a reasonable wait time in milliseconds based on I2C frequency and expected response timeout Note that logging may cause this to be too short.  <br /></td></tr>
<tr class="separator:a5f508dd12de7e78457a5a13adccfb73b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dcaa0980394059153ffa7dbc3f03081" id="r_a2dcaa0980394059153ffa7dbc3f03081"><td class="memItemLeft" align="right" valign="top"><a id="a2dcaa0980394059153ffa7dbc3f03081" name="a2dcaa0980394059153ffa7dbc3f03081"></a>
<a class="el" href="robusto__retval_8h.html#abb47f5a388d5e7f3f11200c9883f7bb9">rob_ret_val_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>send_message_raw_internal</b> (<a class="el" href="structrobusto__peer.html">robusto_peer_t</a> *peer, <a class="el" href="robusto__media__def_8h.html#a6b00e7b716acc963b957b7c99915fe02">e_media_type</a> media_type, uint8_t *data, int data_length, <a class="el" href="robusto__queue_8h.html#a21dbc9a0de5b6b1f2d9327a8c3a3ceff">queue_state</a> *state, bool receipt, bool heartbeat, uint8_t depth, uint8_t exclude_media_types)</td></tr>
<tr class="memdesc:a2dcaa0980394059153ffa7dbc3f03081"><td class="mdescLeft">&#160;</td><td class="mdescRight">For internal use, like send_message_raw but takes more parameters for recursion and heartbeats. <br /></td></tr>
<tr class="separator:a2dcaa0980394059153ffa7dbc3f03081"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69c071341c059921e5e4aebd91429fb7" id="r_a69c071341c059921e5e4aebd91429fb7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="robusto__retval_8h.html#abb47f5a388d5e7f3f11200c9883f7bb9">rob_ret_val_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robusto__message__sending_8c.html#a69c071341c059921e5e4aebd91429fb7">send_message_raw</a> (<a class="el" href="structrobusto__peer.html">robusto_peer_t</a> *peer, <a class="el" href="robusto__media__def_8h.html#a6b00e7b716acc963b957b7c99915fe02">e_media_type</a> media_type, uint8_t *data, int data_length, <a class="el" href="robusto__queue_8h.html#a21dbc9a0de5b6b1f2d9327a8c3a3ceff">queue_state</a> *state, bool receipt)</td></tr>
<tr class="memdesc:a69c071341c059921e5e4aebd91429fb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put a raw message to a specified peer on a specified media send queue. Mostly for internal use.  <br /></td></tr>
<tr class="separator:a69c071341c059921e5e4aebd91429fb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbf86e698203e217f70f6ace9c8896d4" id="r_acbf86e698203e217f70f6ace9c8896d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="robusto__retval_8h.html#abb47f5a388d5e7f3f11200c9883f7bb9">rob_ret_val_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robusto__message__sending_8c.html#acbf86e698203e217f70f6ace9c8896d4">send_message_multi</a> (<a class="el" href="structrobusto__peer.html">robusto_peer_t</a> *peer, uint16_t service_id, uint16_t conversation_id, uint8_t *strings_data, uint16_t strings_length, uint8_t *binary_data, uint16_t binary_length, <a class="el" href="robusto__queue_8h.html#a21dbc9a0de5b6b1f2d9327a8c3a3ceff">queue_state</a> *state, <a class="el" href="robusto__media__def_8h.html#a6b00e7b716acc963b957b7c99915fe02">e_media_type</a> force_media_type)</td></tr>
<tr class="memdesc:acbf86e698203e217f70f6ace9c8896d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Put a multi message (both strings and binary) message to a specified peer on the appropriate media send queue.  <br /></td></tr>
<tr class="separator:acbf86e698203e217f70f6ace9c8896d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b77cd2892a67b947219c8cf581c5f40" id="r_a0b77cd2892a67b947219c8cf581c5f40"><td class="memItemLeft" align="right" valign="top"><a id="a0b77cd2892a67b947219c8cf581c5f40" name="a0b77cd2892a67b947219c8cf581c5f40"></a>
<a class="el" href="robusto__retval_8h.html#abb47f5a388d5e7f3f11200c9883f7bb9">rob_ret_val_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>send_message_strings</b> (<a class="el" href="structrobusto__peer.html">robusto_peer_t</a> *peer, uint16_t service_id, uint16_t conversation_id, uint8_t *strings_data, uint16_t strings_length, <a class="el" href="robusto__queue_8h.html#a21dbc9a0de5b6b1f2d9327a8c3a3ceff">queue_state</a> *state)</td></tr>
<tr class="separator:a0b77cd2892a67b947219c8cf581c5f40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9795aff73c994c821b200725a1554248" id="r_a9795aff73c994c821b200725a1554248"><td class="memItemLeft" align="right" valign="top"><a id="a9795aff73c994c821b200725a1554248" name="a9795aff73c994c821b200725a1554248"></a>
<a class="el" href="robusto__retval_8h.html#abb47f5a388d5e7f3f11200c9883f7bb9">rob_ret_val_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>send_message_binary</b> (<a class="el" href="structrobusto__peer.html">robusto_peer_t</a> *peer, uint16_t service_id, uint16_t conversation_id, uint8_t *binary_data, uint16_t binary_length, <a class="el" href="robusto__queue_8h.html#a21dbc9a0de5b6b1f2d9327a8c3a3ceff">queue_state</a> *state)</td></tr>
<tr class="separator:a9795aff73c994c821b200725a1554248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a497cd0d988a3dcd3ea8a26a9c9d40260" id="r_a497cd0d988a3dcd3ea8a26a9c9d40260"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="robusto__message__sending_8c.html#a497cd0d988a3dcd3ea8a26a9c9d40260">send_work_item</a> (<a class="el" href="structmedia__queue__item.html">media_queue_item_t</a> *<a class="el" href="structqueue__item.html">queue_item</a>, <a class="el" href="structrobusto__media.html">robusto_media_t</a> *info, <a class="el" href="robusto__media__def_8h.html#a6b00e7b716acc963b957b7c99915fe02">e_media_type</a> media_type, send_callback_cb *send_callback, poll_callback_cb *poll_callback, <a class="el" href="structqueue__context.html">queue_context_t</a> *<a class="el" href="structqueue__context.html">queue_context</a>)</td></tr>
<tr class="memdesc:a497cd0d988a3dcd3ea8a26a9c9d40260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the work callbacks of the medias.  <br /></td></tr>
<tr class="separator:a497cd0d988a3dcd3ea8a26a9c9d40260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7519019ed64b7d7a21b635b55c627972" id="r_a7519019ed64b7d7a21b635b55c627972"><td class="memItemLeft" align="right" valign="top"><a id="a7519019ed64b7d7a21b635b55c627972" name="a7519019ed64b7d7a21b635b55c627972"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>robusto_message_sending_init</b> (char *_log_prefix)</td></tr>
<tr class="separator:a7519019ed64b7d7a21b635b55c627972"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a30b20d7ce5adbfac597196ecb42443f0" id="r_a30b20d7ce5adbfac597196ecb42443f0"><td class="memItemLeft" align="right" valign="top"><a id="a30b20d7ce5adbfac597196ecb42443f0" name="a30b20d7ce5adbfac597196ecb42443f0"></a>
char *&#160;</td><td class="memItemRight" valign="bottom"><b>message_sending_log_prefix</b></td></tr>
<tr class="separator:a30b20d7ce5adbfac597196ecb42443f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Robusto functionality for receiving messages. </p>
<p>Robusto messaging functionality.</p>
<dl class="section author"><dt>Author</dt><dd>Nicklas Börjesson (<a href="#" onclick="location.href='mai'+'lto:'+'nic'+'kl'+'asb'+'@g'+'mai'+'l.'+'com'; return false;">nickl<span class="obfuscator">.nosp@m.</span>asb@<span class="obfuscator">.nosp@m.</span>gmail<span class="obfuscator">.nosp@m.</span>.com</a>) </dd></dl>
<dl class="section version"><dt>Version</dt><dd>0.1 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2023-02-19</dd></dl>
<dl class="section copyright"><dt>Copyright</dt><dd>Copyright (c) 2023, Nicklas Börjesson &lt;nicklasb at gmail dot com&gt; All rights reserved. Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</dd></dl>
<ol type="1">
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
</ol>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a5f508dd12de7e78457a5a13adccfb73b" name="a5f508dd12de7e78457a5a13adccfb73b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f508dd12de7e78457a5a13adccfb73b">&#9670;&#160;</a></span>get_media_type_prefix_len()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_media_type_prefix_len </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="robusto__media__def_8h.html#a6b00e7b716acc963b957b7c99915fe02">e_media_type</a>&#160;</td>
          <td class="paramname"><em>media_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrobusto__peer.html">robusto_peer_t</a> *&#160;</td>
          <td class="paramname"><em>peer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate a reasonable wait time in milliseconds based on I2C frequency and expected response timeout Note that logging may cause this to be too short. </p>
<p>Get the prefix len for the specified media type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data_length</td><td>Length of data to be transmitted </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int The timeout needed. </dd></dl>

</div>
</div>
<a id="acbf86e698203e217f70f6ace9c8896d4" name="acbf86e698203e217f70f6ace9c8896d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbf86e698203e217f70f6ace9c8896d4">&#9670;&#160;</a></span>send_message_multi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="robusto__retval_8h.html#abb47f5a388d5e7f3f11200c9883f7bb9">rob_ret_val_t</a> send_message_multi </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrobusto__peer.html">robusto_peer_t</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>service_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conversation_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>strings_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>strings_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>binary_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>binary_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="robusto__queue_8h.html#a21dbc9a0de5b6b1f2d9327a8c3a3ceff">queue_state</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="robusto__media__def_8h.html#a6b00e7b716acc963b957b7c99915fe02">e_media_type</a>&#160;</td>
          <td class="paramname"><em>force_media_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Put a multi message (both strings and binary) message to a specified peer on the appropriate media send queue. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">peer</td><td>The destination peer </td></tr>
    <tr><td class="paramname">media_type</td><td>The media to use </td></tr>
    <tr><td class="paramname">data</td><td>The data to send </td></tr>
    <tr><td class="paramname">data_length</td><td>The length of the data </td></tr>
    <tr><td class="paramname">state</td><td>Optional state structure if one want to track message progress </td></tr>
    <tr><td class="paramname">receipt</td><td>Require a receipt for successful transfer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>rob_ret_val_t Was the message successfully built and put on the queue for sending?</dd></dl>
<p>Sends a multi message (both strings and binary) message to a specified peer on the appropriate media send queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">peer</td><td>The destination peer </td></tr>
    <tr><td class="paramname">service_id</td><td>If set, send to this service on the per </td></tr>
    <tr><td class="paramname">conversation_id</td><td>Tell the per to mark the related reply with this conversation id </td></tr>
    <tr><td class="paramname">strings_data</td><td>Pointer to a null-terminated array of strings </td></tr>
    <tr><td class="paramname">strings_length</td><td>The length of the strings data in bytes </td></tr>
    <tr><td class="paramname">binary_data</td><td>Pointer to binary data </td></tr>
    <tr><td class="paramname">binary_length</td><td>Pointer to length of binary data </td></tr>
    <tr><td class="paramname">state</td><td>Optional state structure if one want to track message progress all the way to the receipt </td></tr>
    <tr><td class="paramname">force_media_type</td><td>Force use a specified media type </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>rob_ret_val_t Return ROB_OK if the message was successfully put on the appropriate media send queue. </dd></dl>

</div>
</div>
<a id="a69c071341c059921e5e4aebd91429fb7" name="a69c071341c059921e5e4aebd91429fb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69c071341c059921e5e4aebd91429fb7">&#9670;&#160;</a></span>send_message_raw()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="robusto__retval_8h.html#abb47f5a388d5e7f3f11200c9883f7bb9">rob_ret_val_t</a> send_message_raw </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structrobusto__peer.html">robusto_peer_t</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="robusto__media__def_8h.html#a6b00e7b716acc963b957b7c99915fe02">e_media_type</a>&#160;</td>
          <td class="paramname"><em>media_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="robusto__queue_8h.html#a21dbc9a0de5b6b1f2d9327a8c3a3ceff">queue_state</a> *&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>receipt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Put a raw message to a specified peer on a specified media send queue. Mostly for internal use. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">peer</td><td>The destination peer </td></tr>
    <tr><td class="paramname">media_type</td><td>The media to use </td></tr>
    <tr><td class="paramname">data</td><td>The data to send </td></tr>
    <tr><td class="paramname">data_length</td><td>The length of the data </td></tr>
    <tr><td class="paramname">state</td><td>Optional state structure if one want to track message progress </td></tr>
    <tr><td class="paramname">receipt</td><td>Require a receipt for successful transfer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>rob_ret_val_t Was the message successfully built and put on the queue for sending? </dd></dl>

</div>
</div>
<a id="a497cd0d988a3dcd3ea8a26a9c9d40260" name="a497cd0d988a3dcd3ea8a26a9c9d40260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a497cd0d988a3dcd3ea8a26a9c9d40260">&#9670;&#160;</a></span>send_work_item()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void send_work_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmedia__queue__item.html">media_queue_item_t</a> *&#160;</td>
          <td class="paramname"><em>queue_item</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structrobusto__media.html">robusto_media_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="robusto__media__def_8h.html#a6b00e7b716acc963b957b7c99915fe02">e_media_type</a>&#160;</td>
          <td class="paramname"><em>media_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">send_callback_cb *&#160;</td>
          <td class="paramname"><em>send_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">poll_callback_cb *&#160;</td>
          <td class="paramname"><em>poll_callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structqueue__context.html">queue_context_t</a> *&#160;</td>
          <td class="paramname"><em>queue_context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called by the work callbacks of the medias. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">work_item</td><td>The queue item to send </td></tr>
    <tr><td class="paramname">media_type</td><td>The media type </td></tr>
    <tr><td class="paramname">send_callback</td><td>Callback to the media send function to be used </td></tr>
    <tr><td class="paramname">poll_callback</td><td>Callback to the media listen function </td></tr>
    <tr><td class="paramname"><a class="el" href="structqueue__context.html">queue_context</a></td><td>The queue context </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
